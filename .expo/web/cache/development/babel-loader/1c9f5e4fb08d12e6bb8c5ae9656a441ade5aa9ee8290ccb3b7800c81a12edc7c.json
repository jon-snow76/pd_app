{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _nativeInterface = _interopRequireDefault(require(\"./nativeInterface\"));\nvar _internetReachability = _interopRequireDefault(require(\"./internetReachability\"));\nvar PrivateTypes = _interopRequireWildcard(require(\"./privateTypes\"));\nfunction _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nvar State = exports.default = (0, _createClass2.default)(function State(configuration) {\n  var _this = this;\n  (0, _classCallCheck2.default)(this, State);\n  _defineProperty(this, \"_nativeEventSubscription\", null);\n  _defineProperty(this, \"_subscriptions\", new Set());\n  _defineProperty(this, \"_latestState\", null);\n  _defineProperty(this, \"_internetReachability\", void 0);\n  _defineProperty(this, \"_handleNativeStateUpdate\", function (state) {\n    _this._internetReachability.update(state);\n    var convertedState = _this._convertState(state);\n    _this._latestState = convertedState;\n    _this._subscriptions.forEach(function (handler) {\n      return handler(convertedState);\n    });\n  });\n  _defineProperty(this, \"_handleInternetReachabilityUpdate\", function (isInternetReachable) {\n    if (!_this._latestState) {\n      return;\n    }\n    var nextState = Object.assign({}, _this._latestState, {\n      isInternetReachable: isInternetReachable\n    });\n    _this._latestState = nextState;\n    _this._subscriptions.forEach(function (handler) {\n      return handler(nextState);\n    });\n  });\n  _defineProperty(this, \"_fetchCurrentState\", function () {\n    var _ref = (0, _asyncToGenerator2.default)(function* (requestedInterface) {\n      var state = yield _nativeInterface.default.getCurrentState(requestedInterface);\n      _this._internetReachability.update(state);\n      var convertedState = _this._convertState(state);\n      if (!requestedInterface) {\n        _this._latestState = convertedState;\n        _this._subscriptions.forEach(function (handler) {\n          return handler(convertedState);\n        });\n      }\n      return convertedState;\n    });\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  _defineProperty(this, \"_convertState\", function (input) {\n    if (typeof input.isInternetReachable === 'boolean') {\n      return input;\n    } else {\n      return Object.assign({}, input, {\n        isInternetReachable: _this._internetReachability.currentState()\n      });\n    }\n  });\n  _defineProperty(this, \"latest\", function (requestedInterface) {\n    if (requestedInterface) {\n      return _this._fetchCurrentState(requestedInterface);\n    } else if (_this._latestState) {\n      return Promise.resolve(_this._latestState);\n    } else {\n      return _this._fetchCurrentState();\n    }\n  });\n  _defineProperty(this, \"add\", function (handler) {\n    _this._subscriptions.add(handler);\n    if (_this._latestState) {\n      handler(_this._latestState);\n    } else {\n      _this.latest().then(handler);\n    }\n  });\n  _defineProperty(this, \"remove\", function (handler) {\n    _this._subscriptions.delete(handler);\n  });\n  _defineProperty(this, \"tearDown\", function () {\n    if (_this._internetReachability) {\n      _this._internetReachability.tearDown();\n    }\n    if (_this._nativeEventSubscription) {\n      _this._nativeEventSubscription.remove();\n    }\n    _this._subscriptions.clear();\n  });\n  this._internetReachability = new _internetReachability.default(configuration, this._handleInternetReachabilityUpdate);\n  this._nativeEventSubscription = _nativeInterface.default.eventEmitter.addListener(PrivateTypes.DEVICE_CONNECTIVITY_EVENT, this._handleNativeStateUpdate);\n  this._fetchCurrentState();\n});","map":{"version":3,"names":["_nativeInterface","_interopRequireDefault","require","_internetReachability","PrivateTypes","_interopRequireWildcard","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","State","exports","_createClass2","configuration","_this","_classCallCheck2","_defineProperty","Set","state","update","convertedState","_convertState","_latestState","_subscriptions","forEach","handler","isInternetReachable","nextState","assign","_ref","_asyncToGenerator2","requestedInterface","NativeInterface","getCurrentState","_x","apply","arguments","input","currentState","_fetchCurrentState","Promise","resolve","add","latest","then","delete","tearDown","_nativeEventSubscription","remove","clear","InternetReachability","_handleInternetReachabilityUpdate","eventEmitter","addListener","DEVICE_CONNECTIVITY_EVENT","_handleNativeStateUpdate"],"sources":["/Users/vaishnavkrishnan/Desktop/pd_app/node_modules/@react-native-community/netinfo/lib/module/internal/state.ts"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n */\n\nimport {NativeEventSubscription} from 'react-native';\nimport NativeInterface from './nativeInterface';\nimport InternetReachability from './internetReachability';\nimport * as Types from './types';\nimport * as PrivateTypes from './privateTypes';\n\nexport default class State {\n  private _nativeEventSubscription: NativeEventSubscription | null = null;\n  private _subscriptions = new Set<Types.NetInfoChangeHandler>();\n  private _latestState: Types.NetInfoState | null = null;\n  private _internetReachability: InternetReachability;\n\n  constructor(configuration: Types.NetInfoConfiguration) {\n    // Add the listener to the internet connectivity events\n    this._internetReachability = new InternetReachability(\n      configuration,\n      this._handleInternetReachabilityUpdate,\n    );\n\n    // Add the subscription to the native events\n    this._nativeEventSubscription = NativeInterface.eventEmitter.addListener(\n      PrivateTypes.DEVICE_CONNECTIVITY_EVENT,\n      this._handleNativeStateUpdate,\n    );\n\n    // Fetch the current state from the native module\n    this._fetchCurrentState();\n  }\n\n  private _handleNativeStateUpdate = (\n    state: PrivateTypes.NetInfoNativeModuleState,\n  ): void => {\n    // Update the internet reachability module\n    this._internetReachability.update(state);\n\n    // Convert the state from native to JS shape\n    const convertedState = this._convertState(state);\n\n    // Update the listeners\n    this._latestState = convertedState;\n    this._subscriptions.forEach((handler): void => handler(convertedState));\n  };\n\n  private _handleInternetReachabilityUpdate = (\n    isInternetReachable: boolean | null | undefined,\n  ): void => {\n    if (!this._latestState) {\n      return;\n    }\n\n    const nextState = {\n      ...this._latestState,\n      isInternetReachable,\n    } as Types.NetInfoState;\n    this._latestState = nextState;\n    this._subscriptions.forEach((handler): void => handler(nextState));\n  };\n\n  public _fetchCurrentState = async (\n    requestedInterface?: string,\n  ): Promise<Types.NetInfoState> => {\n    const state = await NativeInterface.getCurrentState(requestedInterface);\n\n    // Update the internet reachability module\n    this._internetReachability.update(state);\n    // Convert and store the new state\n    const convertedState = this._convertState(state);\n    if (!requestedInterface) {\n      this._latestState = convertedState;\n      this._subscriptions.forEach((handler): void => handler(convertedState));\n    }\n\n    return convertedState;\n  };\n\n  private _convertState = (\n    input: PrivateTypes.NetInfoNativeModuleState,\n  ): Types.NetInfoState => {\n    if (typeof input.isInternetReachable === 'boolean') {\n      return input as Types.NetInfoState;\n    } else {\n      return {\n        ...input,\n        isInternetReachable: this._internetReachability.currentState(),\n      } as Types.NetInfoState;\n    }\n  };\n\n  public latest = (\n    requestedInterface?: string,\n  ): Promise<Types.NetInfoState> => {\n    if (requestedInterface) {\n      return this._fetchCurrentState(requestedInterface);\n    } else if (this._latestState) {\n      return Promise.resolve(this._latestState);\n    } else {\n      return this._fetchCurrentState();\n    }\n  };\n\n  public add = (handler: Types.NetInfoChangeHandler): void => {\n    // Add the subscription handler to our set\n    this._subscriptions.add(handler);\n\n    // Send it the latest data we have\n    if (this._latestState) {\n      handler(this._latestState);\n    } else {\n      this.latest().then(handler);\n    }\n  };\n\n  public remove = (handler: Types.NetInfoChangeHandler): void => {\n    this._subscriptions.delete(handler);\n  };\n\n  public tearDown = (): void => {\n    if (this._internetReachability) {\n      this._internetReachability.tearDown();\n    }\n\n    if (this._nativeEventSubscription) {\n      this._nativeEventSubscription.remove();\n    }\n\n    this._subscriptions.clear();\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}