{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useProgress = exports.default = exports.ProgressProvider = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _TimetableContext = require(\"./TimetableContext\");\nvar _TasksContext = require(\"./TasksContext\");\nvar _MedicationContext = require(\"./MedicationContext\");\nvar _progressUtils = require(\"../utils/progressUtils\");\nvar _storage = require(\"../utils/storage\");\nvar _helpers = require(\"../utils/helpers\");\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _this = this,\n  _jsxFileName = \"/Users/vaishnavkrishnan/Documents/projects/pd_app/src/context/ProgressContext.tsx\";\nfunction _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\nvar ProgressContext = (0, _react.createContext)(undefined);\nvar ProgressProvider = exports.ProgressProvider = function ProgressProvider(_ref) {\n  var children = _ref.children;\n  var _useTimetable = (0, _TimetableContext.useTimetable)(),\n    timetableState = _useTimetable.state;\n  var _useTasks = (0, _TasksContext.useTasks)(),\n    tasksState = _useTasks.state;\n  var _useMedication = (0, _MedicationContext.useMedication)(),\n    medicationState = _useMedication.state;\n  (0, _react.useEffect)(function () {\n    generateTodaysLog();\n  }, [timetableState.events, tasksState.tasks, medicationState.medications]);\n  var generateTodaysLog = function () {\n    var _ref2 = (0, _asyncToGenerator2.default)(function* () {\n      try {\n        var today = new Date();\n        var todayLog = (0, _progressUtils.generateProductivityLog)(tasksState.tasks, timetableState.events, medicationState.medications, today);\n        var existingLog = yield (0, _storage.getProductivityLogForDate)((0, _helpers.formatDateString)(today));\n        if (!existingLog || existingLog.productivityScore !== todayLog.productivityScore) {\n          yield (0, _storage.addProductivityLog)(todayLog);\n        }\n      } catch (error) {\n        console.error('Error generating today\\'s log:', error);\n      }\n    });\n    return function generateTodaysLog() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var getWeeklyStats = function getWeeklyStats() {\n    return (0, _progressUtils.calculateWeeklyStats)([]);\n  };\n  var getMonthlyStats = function getMonthlyStats(month, year) {\n    return (0, _progressUtils.calculateMonthlyStats)([], month, year);\n  };\n  var getInsights = function getInsights() {\n    return (0, _progressUtils.getProductivityInsights)(tasksState.tasks, timetableState.events, medicationState.medications, []);\n  };\n  var loadLogs = function () {\n    var _ref3 = (0, _asyncToGenerator2.default)(function* () {\n      try {\n        return yield (0, _storage.loadProductivityLogs)();\n      } catch (error) {\n        console.error('Error loading productivity logs:', error);\n        return [];\n      }\n    });\n    return function loadLogs() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var saveLog = function () {\n    var _ref4 = (0, _asyncToGenerator2.default)(function* (log) {\n      try {\n        yield (0, _storage.addProductivityLog)(log);\n      } catch (error) {\n        console.error('Error saving productivity log:', error);\n      }\n    });\n    return function saveLog(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var contextValue = {\n    generateTodaysLog: generateTodaysLog,\n    getWeeklyStats: getWeeklyStats,\n    getMonthlyStats: getMonthlyStats,\n    getInsights: getInsights,\n    loadLogs: loadLogs,\n    saveLog: saveLog\n  };\n  return (0, _jsxRuntime.jsx)(ProgressContext.Provider, {\n    value: contextValue,\n    children: children\n  });\n};\nvar useProgress = exports.useProgress = function useProgress() {\n  var context = (0, _react.useContext)(ProgressContext);\n  if (context === undefined) {\n    throw new Error('useProgress must be used within a ProgressProvider');\n  }\n  return context;\n};\nvar _default = exports.default = ProgressContext;","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_TimetableContext","_TasksContext","_MedicationContext","_progressUtils","_storage","_helpers","_jsxRuntime","_this","_jsxFileName","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ProgressContext","createContext","undefined","ProgressProvider","exports","_ref","children","_useTimetable","useTimetable","timetableState","state","_useTasks","useTasks","tasksState","_useMedication","useMedication","medicationState","useEffect","generateTodaysLog","events","tasks","medications","_ref2","_asyncToGenerator2","today","Date","todayLog","generateProductivityLog","existingLog","getProductivityLogForDate","formatDateString","productivityScore","addProductivityLog","error","console","apply","arguments","getWeeklyStats","calculateWeeklyStats","getMonthlyStats","month","year","calculateMonthlyStats","getInsights","getProductivityInsights","loadLogs","_ref3","loadProductivityLogs","saveLog","_ref4","log","_x","contextValue","jsx","Provider","value","useProgress","context","useContext","Error","_default"],"sources":["/Users/vaishnavkrishnan/Documents/projects/pd_app/src/context/ProgressContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, ReactNode } from 'react';\nimport { useTimetable } from './TimetableContext';\nimport { useTasks } from './TasksContext';\nimport { useMedication } from './MedicationContext';\nimport { ProductivityLog } from '../types';\nimport {\n  generateProductivityLog,\n  calculateWeeklyStats,\n  calculateMonthlyStats,\n  getProductivityInsights,\n} from '../utils/progressUtils';\nimport {\n  loadProductivityLogs,\n  addProductivityLog,\n  getProductivityLogForDate,\n} from '../utils/storage';\nimport { formatDateString } from '../utils/helpers';\n\n// Context interface\ninterface ProgressContextType {\n  // Auto-generated daily logs\n  generateTodaysLog: () => Promise<void>;\n  // Analytics\n  getWeeklyStats: () => ReturnType<typeof calculateWeeklyStats>;\n  getMonthlyStats: (month: number, year: number) => ReturnType<typeof calculateMonthlyStats>;\n  getInsights: () => ReturnType<typeof getProductivityInsights>;\n  // Data management\n  loadLogs: () => Promise<ProductivityLog[]>;\n  saveLog: (log: ProductivityLog) => Promise<void>;\n}\n\n// Create context\nconst ProgressContext = createContext<ProgressContextType | undefined>(undefined);\n\n// Provider component\ninterface ProgressProviderProps {\n  children: ReactNode;\n}\n\nexport const ProgressProvider: React.FC<ProgressProviderProps> = ({ children }) => {\n  const { state: timetableState } = useTimetable();\n  const { state: tasksState } = useTasks();\n  const { state: medicationState } = useMedication();\n\n  // Auto-generate today's log when data changes\n  useEffect(() => {\n    generateTodaysLog();\n  }, [timetableState.events, tasksState.tasks, medicationState.medications]);\n\n  const generateTodaysLog = async (): Promise<void> => {\n    try {\n      const today = new Date();\n      const todayLog = generateProductivityLog(\n        tasksState.tasks,\n        timetableState.events,\n        medicationState.medications,\n        today\n      );\n\n      // Check if today's log already exists\n      const existingLog = await getProductivityLogForDate(formatDateString(today));\n      \n      if (!existingLog || existingLog.productivityScore !== todayLog.productivityScore) {\n        await addProductivityLog(todayLog);\n      }\n    } catch (error) {\n      console.error('Error generating today\\'s log:', error);\n    }\n  };\n\n  const getWeeklyStats = () => {\n    return calculateWeeklyStats([]);\n  };\n\n  const getMonthlyStats = (month: number, year: number) => {\n    return calculateMonthlyStats([], month, year);\n  };\n\n  const getInsights = () => {\n    return getProductivityInsights(\n      tasksState.tasks,\n      timetableState.events,\n      medicationState.medications,\n      []\n    );\n  };\n\n  const loadLogs = async (): Promise<ProductivityLog[]> => {\n    try {\n      return await loadProductivityLogs();\n    } catch (error) {\n      console.error('Error loading productivity logs:', error);\n      return [];\n    }\n  };\n\n  const saveLog = async (log: ProductivityLog): Promise<void> => {\n    try {\n      await addProductivityLog(log);\n    } catch (error) {\n      console.error('Error saving productivity log:', error);\n    }\n  };\n\n  // Context value\n  const contextValue: ProgressContextType = {\n    generateTodaysLog,\n    getWeeklyStats,\n    getMonthlyStats,\n    getInsights,\n    loadLogs,\n    saveLog,\n  };\n\n  return (\n    <ProgressContext.Provider value={contextValue}>\n      {children}\n    </ProgressContext.Provider>\n  );\n};\n\n// Custom hook to use the context\nexport const useProgress = (): ProgressContextType => {\n  const context = useContext(ProgressContext);\n  if (context === undefined) {\n    throw new Error('useProgress must be used within a ProgressProvider');\n  }\n  return context;\n};\n\nexport default ProgressContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}