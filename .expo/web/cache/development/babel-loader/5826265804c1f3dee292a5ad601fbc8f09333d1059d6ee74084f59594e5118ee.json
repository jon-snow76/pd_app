{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useApp = exports.default = exports.AppProvider = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _storage = require(\"../utils/storage\");\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _this = this,\n  _jsxFileName = \"/Users/vaishnavkrishnan/Documents/projects/pd_app/src/context/AppContext.tsx\";\nfunction _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\nvar initialState = {\n  preferences: {\n    notificationsEnabled: true,\n    defaultEventDuration: 60,\n    workingHours: {\n      start: '09:00',\n      end: '17:00'\n    },\n    reminderOffset: 15\n  },\n  isInitialized: false,\n  loading: false,\n  error: null\n};\nvar appReducer = function appReducer(state, action) {\n  switch (action.type) {\n    case 'SET_LOADING':\n      return Object.assign({}, state, {\n        loading: action.payload\n      });\n    case 'SET_ERROR':\n      return Object.assign({}, state, {\n        error: action.payload,\n        loading: false\n      });\n    case 'SET_PREFERENCES':\n      return Object.assign({}, state, {\n        preferences: action.payload,\n        loading: false,\n        error: null\n      });\n    case 'SET_INITIALIZED':\n      return Object.assign({}, state, {\n        isInitialized: action.payload\n      });\n    case 'UPDATE_PREFERENCE':\n      return Object.assign({}, state, {\n        preferences: Object.assign({}, state.preferences, (0, _defineProperty2.default)({}, action.payload.key, action.payload.value))\n      });\n    default:\n      return state;\n  }\n};\nvar AppContext = (0, _react.createContext)(undefined);\nvar AppProvider = exports.AppProvider = function AppProvider(_ref) {\n  var children = _ref.children;\n  var _useReducer = (0, _react.useReducer)(appReducer, initialState),\n    _useReducer2 = (0, _slicedToArray2.default)(_useReducer, 2),\n    state = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  (0, _react.useEffect)(function () {\n    loadPreferences();\n  }, []);\n  var loadPreferences = function () {\n    var _ref2 = (0, _asyncToGenerator2.default)(function* () {\n      try {\n        dispatch({\n          type: 'SET_LOADING',\n          payload: true\n        });\n        var preferences = yield (0, _storage.loadUserPreferences)();\n        dispatch({\n          type: 'SET_PREFERENCES',\n          payload: preferences\n        });\n        dispatch({\n          type: 'SET_INITIALIZED',\n          payload: true\n        });\n      } catch (error) {\n        dispatch({\n          type: 'SET_ERROR',\n          payload: 'Failed to load preferences'\n        });\n        console.error('Error loading preferences:', error);\n      }\n    });\n    return function loadPreferences() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var updatePreference = function () {\n    var _ref3 = (0, _asyncToGenerator2.default)(function* (key, value) {\n      try {\n        dispatch({\n          type: 'UPDATE_PREFERENCE',\n          payload: {\n            key: key,\n            value: value\n          }\n        });\n        var updatedPreferences = Object.assign({}, state.preferences, (0, _defineProperty2.default)({}, key, value));\n        yield (0, _storage.saveUserPreferences)(updatedPreferences);\n      } catch (error) {\n        dispatch({\n          type: 'SET_ERROR',\n          payload: 'Failed to update preference'\n        });\n        console.error('Error updating preference:', error);\n      }\n    });\n    return function updatePreference(_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var savePreferences = function () {\n    var _ref4 = (0, _asyncToGenerator2.default)(function* () {\n      try {\n        yield (0, _storage.saveUserPreferences)(state.preferences);\n      } catch (error) {\n        dispatch({\n          type: 'SET_ERROR',\n          payload: 'Failed to save preferences'\n        });\n        console.error('Error saving preferences:', error);\n      }\n    });\n    return function savePreferences() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var resetPreferences = function () {\n    var _ref5 = (0, _asyncToGenerator2.default)(function* () {\n      try {\n        var defaultPreferences = initialState.preferences;\n        dispatch({\n          type: 'SET_PREFERENCES',\n          payload: defaultPreferences\n        });\n        yield (0, _storage.saveUserPreferences)(defaultPreferences);\n      } catch (error) {\n        dispatch({\n          type: 'SET_ERROR',\n          payload: 'Failed to reset preferences'\n        });\n        console.error('Error resetting preferences:', error);\n      }\n    });\n    return function resetPreferences() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var contextValue = {\n    state: state,\n    loadPreferences: loadPreferences,\n    updatePreference: updatePreference,\n    savePreferences: savePreferences,\n    resetPreferences: resetPreferences\n  };\n  return (0, _jsxRuntime.jsx)(AppContext.Provider, {\n    value: contextValue,\n    children: children\n  });\n};\nvar useApp = exports.useApp = function useApp() {\n  var context = (0, _react.useContext)(AppContext);\n  if (context === undefined) {\n    throw new Error('useApp must be used within an AppProvider');\n  }\n  return context;\n};\nvar _default = exports.default = AppContext;","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_storage","_jsxRuntime","_this","_jsxFileName","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","initialState","preferences","notificationsEnabled","defaultEventDuration","workingHours","start","end","reminderOffset","isInitialized","loading","error","appReducer","state","action","type","assign","payload","_defineProperty2","key","value","AppContext","createContext","undefined","AppProvider","exports","_ref","children","_useReducer","useReducer","_useReducer2","_slicedToArray2","dispatch","useEffect","loadPreferences","_ref2","_asyncToGenerator2","loadUserPreferences","console","apply","arguments","updatePreference","_ref3","updatedPreferences","saveUserPreferences","_x","_x2","savePreferences","_ref4","resetPreferences","_ref5","defaultPreferences","contextValue","jsx","Provider","useApp","context","useContext","Error","_default"],"sources":["/Users/vaishnavkrishnan/Documents/projects/pd_app/src/context/AppContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect, ReactNode } from 'react';\nimport { UserPreferences } from '../types';\nimport { loadUserPreferences, saveUserPreferences } from '../utils/storage';\n\n// State interface\ninterface AppState {\n  preferences: UserPreferences;\n  isInitialized: boolean;\n  loading: boolean;\n  error: string | null;\n}\n\n// Action types\ntype AppAction =\n  | { type: 'SET_LOADING'; payload: boolean }\n  | { type: 'SET_ERROR'; payload: string | null }\n  | { type: 'SET_PREFERENCES'; payload: UserPreferences }\n  | { type: 'SET_INITIALIZED'; payload: boolean }\n  | { type: 'UPDATE_PREFERENCE'; payload: { key: keyof UserPreferences; value: any } };\n\n// Initial state\nconst initialState: AppState = {\n  preferences: {\n    notificationsEnabled: true,\n    defaultEventDuration: 60,\n    workingHours: {\n      start: '09:00',\n      end: '17:00',\n    },\n    reminderOffset: 15,\n  },\n  isInitialized: false,\n  loading: false,\n  error: null,\n};\n\n// Reducer function\nconst appReducer = (state: AppState, action: AppAction): AppState => {\n  switch (action.type) {\n    case 'SET_LOADING':\n      return { ...state, loading: action.payload };\n    \n    case 'SET_ERROR':\n      return { ...state, error: action.payload, loading: false };\n    \n    case 'SET_PREFERENCES':\n      return { ...state, preferences: action.payload, loading: false, error: null };\n    \n    case 'SET_INITIALIZED':\n      return { ...state, isInitialized: action.payload };\n    \n    case 'UPDATE_PREFERENCE':\n      return {\n        ...state,\n        preferences: {\n          ...state.preferences,\n          [action.payload.key]: action.payload.value,\n        },\n      };\n    \n    default:\n      return state;\n  }\n};\n\n// Context interface\ninterface AppContextType {\n  state: AppState;\n  loadPreferences: () => Promise<void>;\n  updatePreference: <K extends keyof UserPreferences>(\n    key: K,\n    value: UserPreferences[K]\n  ) => Promise<void>;\n  savePreferences: () => Promise<void>;\n  resetPreferences: () => Promise<void>;\n}\n\n// Create context\nconst AppContext = createContext<AppContextType | undefined>(undefined);\n\n// Provider component\ninterface AppProviderProps {\n  children: ReactNode;\n}\n\nexport const AppProvider: React.FC<AppProviderProps> = ({ children }) => {\n  const [state, dispatch] = useReducer(appReducer, initialState);\n\n  // Load preferences on mount\n  useEffect(() => {\n    loadPreferences();\n  }, []);\n\n  // Preference management functions\n  const loadPreferences = async (): Promise<void> => {\n    try {\n      dispatch({ type: 'SET_LOADING', payload: true });\n      const preferences = await loadUserPreferences();\n      dispatch({ type: 'SET_PREFERENCES', payload: preferences });\n      dispatch({ type: 'SET_INITIALIZED', payload: true });\n    } catch (error) {\n      dispatch({ type: 'SET_ERROR', payload: 'Failed to load preferences' });\n      console.error('Error loading preferences:', error);\n    }\n  };\n\n  const updatePreference = async <K extends keyof UserPreferences>(\n    key: K,\n    value: UserPreferences[K]\n  ): Promise<void> => {\n    try {\n      dispatch({ type: 'UPDATE_PREFERENCE', payload: { key, value } });\n      \n      // Save updated preferences\n      const updatedPreferences = {\n        ...state.preferences,\n        [key]: value,\n      };\n      await saveUserPreferences(updatedPreferences);\n    } catch (error) {\n      dispatch({ type: 'SET_ERROR', payload: 'Failed to update preference' });\n      console.error('Error updating preference:', error);\n    }\n  };\n\n  const savePreferences = async (): Promise<void> => {\n    try {\n      await saveUserPreferences(state.preferences);\n    } catch (error) {\n      dispatch({ type: 'SET_ERROR', payload: 'Failed to save preferences' });\n      console.error('Error saving preferences:', error);\n    }\n  };\n\n  const resetPreferences = async (): Promise<void> => {\n    try {\n      const defaultPreferences = initialState.preferences;\n      dispatch({ type: 'SET_PREFERENCES', payload: defaultPreferences });\n      await saveUserPreferences(defaultPreferences);\n    } catch (error) {\n      dispatch({ type: 'SET_ERROR', payload: 'Failed to reset preferences' });\n      console.error('Error resetting preferences:', error);\n    }\n  };\n\n  // Context value\n  const contextValue: AppContextType = {\n    state,\n    loadPreferences,\n    updatePreference,\n    savePreferences,\n    resetPreferences,\n  };\n\n  return (\n    <AppContext.Provider value={contextValue}>\n      {children}\n    </AppContext.Provider>\n  );\n};\n\n// Custom hook to use the context\nexport const useApp = (): AppContextType => {\n  const context = useContext(AppContext);\n  if (context === undefined) {\n    throw new Error('useApp must be used within an AppProvider');\n  }\n  return context;\n};\n\nexport default AppContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}